{%- comment -%} Determine Post URL {%- endcomment -%}
{%- if post.external_url -%}
  {%- assign post_url = post.external_url -%}
{%- else -%}
  {%- assign post_url = post.url | relative_url -%}
{%- endif -%}

<div class="my-4 py-3 border-bottom wow animated fadeIn" data-wow-delay=".1s">
  <a href="{{ post_url }}" class="d-flex text-decoration-none gap-3" style="align-items: stretch;" {%- if post.external_url and site.open_new_tab -%} target="_blank" {%- endif -%}>

    <!-- 텍스트 왼쪽 영역 -->
    <div style="flex: 1;">
      {%- assign post_title_ko = post.title.ko | default: post.title -%}
      {%- assign post_title_en = post.title.en | default: post_title_ko -%}
      {%- assign post_desc_ko = post.description.ko | default: post.description -%}
      {%- assign post_desc_en = post.description.en | default: post_desc_ko -%}

      <h2 class="mb-1" style="font-size: 1.1rem;">
        <span class="lang-content" data-lang="ko" data-lang-group="post-card-title-{{ forloop.index0 }}">{{ post_title_ko }}</span>
        <span class="lang-content" data-lang="en" data-lang-group="post-card-title-{{ forloop.index0 }}">{{ post_title_en }}</span>
      </h2>

      <p class="text-muted mb-1" style="font-size: 0.9rem;">
        {% for tag in post.tags %}
        <span class="badge badge-secondary">{{ tag }}</span>
        {% endfor %}
      </p>

      <p class="mb-1" style="color: #444;">
        {%- assign excerpt_fallback = post.excerpt | strip_html | truncatewords: 30 -%}
        <span class="lang-content" data-lang="ko" data-lang-group="post-card-desc-{{ forloop.index0 }}">{{ post_desc_ko | default: excerpt_fallback }}</span>
        <span class="lang-content" data-lang="en" data-lang-group="post-card-desc-{{ forloop.index0 }}">{{ post_desc_en | default: excerpt_fallback }}</span>
      </p>

      <p class="text-muted" style="font-size: 0.8rem;">{{ post.date | date: "%Y. %m. %d" }}</p>
    </div>

    <!-- 이미지 오른쪽 영역 -->
    {%- if post.img -%}
      <div style="width: 160px; aspect-ratio: 1 / 1; flex-shrink: 0;">
        <img src="{{ post.img | relative_url }}" alt="preview"
             style="width: 100%; height: 100%; object-fit: cover; object-position: center; border-radius: 8px;">
      </div>
    {%- endif -%}

  </a>
</div>
